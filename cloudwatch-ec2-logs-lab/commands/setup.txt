# ðŸš€ CloudWatch EC2 Logs Setup â€“ Step-by-Step

## ðŸ”¹ Prerequisites
- Launch an EC2 instance using Amazon Linux AMI
- Attach IAM Role with policy: CloudWatchAgentServerPolicy or CloudWatchFullAccess

---

## ðŸ”¹ Step 1 â€” Install CloudWatch Agent

```bash
sudo yum install amazon-cloudwatch-agent -y
```

---

## ðŸ”¹ Step 2 â€” Update CloudWatch config file

```bash
sudo vi /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.json
```

- Press `i` to enter insert mode and paste the JSON configuration from the repository (`cloudwatch-ec2-logs-lab/config/amazon-cloudwatch-agent.json`)  
- Save and exit: `Esc` â†’ `:wq` â†’ `Enter`

---

## ðŸ”¹ Step 3 â€” Start and Enable the Agent

```bash
sudo systemctl enable amazon-cloudwatch-agent
sudo systemctl start amazon-cloudwatch-agent
```

---

## ðŸ”¹ Step 4 â€” Verify Agent Status

```bash
sudo systemctl status amazon-cloudwatch-agent
```

---

## ðŸ”¹ Step 5 â€” Validate in AWS Console
- Go to CloudWatch â†’ Logs â†’ Log groups  
- You will see the log group used inside the JSON (example: `/ec2/cloud-init-log`)  
- Click the log group â†’ select the log stream (instance-id) â†’ log events will appear

---

## ðŸ’¡ Notes
- If JSON is updated, restart the agent:

```bash
sudo systemctl restart amazon-cloudwatch-agent
```

- Multiple log files can be added with additional `"collect_list"` entries inside the JSON

---

ðŸŽ‰ **Setup Completed â€” Logs are now visible in CloudWatch**
